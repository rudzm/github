name: "Testing"

on:
 push:
    branches:
      - main
jobs:
  testing:
    runs-on: "ubuntu-latest"
    environment: ${{ inputs.environment }}
    steps:
      - name: Checkout
        uses: actions/checkout@v3
        with: 
          ref: ${{ github.ref.name }}

      - name: Get branch name
        id: get_branch_name
        run: |
          branch_name=$(git log -1 --pretty=format:"%d" | grep -oP '(?<=origin/)\S+(?=,)' | head -1)
          echo "BRANCH_NAME=${branch_name}" >> $GITHUB_ENV

      - name: echo
        run: |
          echo ${{ env.BRANCH_NAME }} 
      - name: echo2
        run: |
          echo ${{ env.BRANCH_NAME }}
